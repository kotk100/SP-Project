function showDropdown(e){e.target.parentElement.parentElement.getElementsByClassName("dropdown-content")[0].classList.toggle("show")}function deleteLecture(e){var t=new XMLHttpRequest;t.onreadystatechange=function(){if(4==this.readyState&&204==this.status)for(e.className=e.className.replace(/ c[0-8] /g," ");e.firstChild;)e.removeChild(e.firstChild)},t.open("DELETE","http://localhost:3000/lecture/"+e.getAttribute("data-lecture"),!0),t.send()}function getLecturesForCourse(e,t,n){var a=n?n:e.target.getAttribute("data-subject"),r=document.getElementById("courseTimetable"),o=new XMLHttpRequest;o.onreadystatechange=function(){if(4==this.readyState&&200==this.status){for(var e=JSON.parse(this.responseText),n=0;r.firstChild;)r.removeChild(r.firstChild);for(var a=0;a<5;a++){var o=7,s=document.createElement("div");s.className="col-2-1";var l=document.createElement("div");for(l.appendChild(document.createTextNode(days[a])),l.className="day",s.appendChild(l);o<21;){var c=document.createElement("div");if(c.className="lecture lh-",e[n]&&e[n].day==a){var d=parseInt(e[n].startTime.substring(0,2));d!=o&&(c.className+=d-o,s.appendChild(c),c=document.createElement("div"),c.className="lecture lh-"),o=d+e[n].duration,c.className+=e[n].duration+" c7",c.setAttribute("data-lecture",e[n].idLecture),c.addEventListener("click",function(e){return t(e.target.getAttribute("data-lecture")||e.target.parentElement.getAttribute("data-lecture"))});var i=document.createElement("p");i.className="title",i.appendChild(document.createTextNode(e[n]["Subject.subjectName"])),c.appendChild(i),i=document.createElement("p"),i.className="detail enlarge",i.appendChild(document.createTextNode(d+":00-"+o+":00 "+e[n].location+" ")),c.appendChild(i),i=document.createElement("p"),i.className="detail",i.appendChild(document.createTextNode(e[n]["Lecturer.lecturerName"])),c.appendChild(i),n++}else c.className+=21-o,o=21;s.appendChild(c)}r.appendChild(s)}}},o.open("GET","http://localhost:3000/lecture/"+a,!0),o.send()}function showCourseSelection(e){document.getElementById("courseSelect").style.display="flex";var t=document.getElementById("courseSelectList"),n=new XMLHttpRequest;n.onreadystatechange=function(){if(4==this.readyState&&200==this.status)for(var n=JSON.parse(this.responseText),a=0;a<n.length;a++){var r=document.createElement("li");r.setAttribute("data-subject",n[a].idSubject),r.appendChild(document.createTextNode(n[a].longName)),r.addEventListener("click",function(t){getLecturesForCourse(t,e)}),t.appendChild(r)}},n.open("GET","http://localhost:3000/lecture/",!0),n.send()}function searchCousrses(e){courses||(courses=document.getElementById("courseSelectList").getElementsByTagName("li")),searchVal=e.value.toLowerCase();for(var t=0;t<courses.length;t++)!searchVal||courses[t].textContent.toLowerCase().indexOf(searchVal)>-1?courses[t].style.display="list-item":courses[t].style.display="none"}function doExchange(e){document.getElementById("courseSelect").style.display="flex",getLecturesForCourse(null,function(t){var n=new XMLHttpRequest;n.onreadystatechange=function(){4==this.readyState&&200==this.status&&(confirm("Exchange added. If or when you are matched with another person, you will recieve an email informing you."),window.location.reload())},n.open("POST","http://localhost:3000/lecture/exchange/"+t+"/"+e.target.parentElement.parentElement.parentElement.parentElement.getAttribute("data-lecture"),!0),n.send()},e.target.parentElement.parentElement.parentElement.parentElement.getAttribute("data-subject"))}function promptDelete(){window.confirm("Are you sure you want to remove the lecture from your timetable?")}function doReplace(e){window.confirm("Are you sure you want to replace the lecture from your timetable? This will remove the selected lecture"),deleteLecture(e.target.parentElement.parentElement.parentElement.parentElement),doInsert()}function doRemove(e){window.confirm("Are you sure you want to remove the lecture from your timetable?")&&deleteLecture(e.target.parentElement.parentElement)}function doRemoveMenu(e){promptDelete(),deleteLecture(e.target.parentElement.parentElement.parentElement.parentElement)}function doInsert(e){showCourseSelection(function(e){var t=new XMLHttpRequest;t.onreadystatechange=function(){4==this.readyState&&200==this.status&&(confirm("Course added!\n This page will now refresh"),window.location.reload())},t.open("POST","http://localhost:3000/lecture/add/"+e,!0),t.send()})}document.addEventListener("DOMContentLoaded",function(e){for(var t=document.getElementsByClassName("exchange"),n=0;n<t.length;n++)t[n].addEventListener("click",doExchange);t=document.getElementsByClassName("replace");for(var n=0;n<t.length;n++)t[n].addEventListener("click",doReplace);t=document.getElementsByClassName("remove");for(var n=0;n<t.length;n++)t[n].addEventListener("click",doRemove);t=document.getElementsByClassName("removeMenu");for(var n=0;n<t.length;n++)t[n].addEventListener("click",doRemoveMenu);t=document.getElementsByClassName("showDrop");for(var n=0;n<t.length;n++)t[n].addEventListener("click",showDropdown);var a=document.getElementById("newLecture");a.addEventListener("click",doInsert);var a=document.getElementById("search");a.addEventListener("keyup",searchCousrses)}),window.onclick=function(e){if(!e.target.matches(".dropbtn")){var t,n=document.getElementsByClassName("dropdown-content");for(t=0;t<n.length;t++){var a=n[t];a.classList.contains("show")&&a.classList.remove("show")}}};var days=["Mon","Tue","Wed","Thu","Fri"],courses;